<!DOCTYPE html>
<html>
<head>
	<style type="text/css">
	.gettingStartedHeader {
		font-family: arial, verdana;
		color: #0f3d8b;
		text-align: center;
		font-size: 22px;
	}	
	.centerContentDiv {
		font-size: 14px;
		font-family: arial, verdana;
		height:100%;	
		width: 90%;
		margin-left: auto;
		margin-right: auto
	}
	
		.caption {
		font-family: arial, verdana;
		color: red;
		text-align: center;
		font-size: 12px;
	}	
	
	</style>
</head>
  <body bgcolor="#ffffff">
 	<div class="gettingStartedHeader"><b>OMET: Online Music Engraving Tools</b></div>
    <div id="MyAppDiv" class="centerContentDiv">
	<p>
		Welcome to OMET, the <b>O</b>nline <b>M</b>usic <b>E</b>ngraving <b>T</b>ools website.
	</p>
	<p>	
		OMET is intended as a 'Cloud' IDE (<i>Integrated Development Environment</i>)
		for developing high-quality music scores right in the web browser.
		
		The site is based on <a href="https://www.os-js.org/" parent="_blank"> OS.JS </a>, an open-source
		JavaScript Web Desktop 	by Anders Evanrud [1] .
		It has a fully-fledged window manager, Application APIs, GUI toolkits and filesystem abstraction,
		and uses the  award-winning <a href="https://www.lilypond.org/" parent="_blank">
		Lilypond </a> as the back-end engraving system.
	</p>
	<p>	
		OMET  is a free, open-source initiative with no user fees.
    </p>
    <p>
    <b>Compiling a score</b>
    </p>
    <p>
 	Lilypond is more like a programming language than a desktop music program; you write text files containing
 	<i>source code</i> the likes
	of this:<br/>
	<br/>
	<code>
	\relative c' {  <br/>
	<br/>
	g'4  r8 d g4 r8 d | <br/>
	g d g b d4 r | <br/>
	</br>
	} <br/>
	</code>

	<br/>
	and the Lilypond 'compiler' turns this <i>source code</i> into a finished music score:
	</p>
	<p> 
	<center>
	<img src="snippet.png" border="2">
	</center>
	</p>

	<p>
	Select Menu -> Development -> Browser, and open the 'Fragment.ly' file.
	(On Desktop systems, double-click items to open them; on mobile systems, single-click to
	open).
	</p>
	<p> 
	<center>
	<img src="OMET-FileBrowser.png" border="2"></br>
	<span class="caption"><i>Fig. 1: File Browser</i></span>
	</center>
	
	</p>
	
	<p>
	Its source code contents will be displayed
	in the editor. Click the 'Compile' button:
	</p>
	<p> 
	<center>
	<img src="fragment.png" border="2"></br>
	<span class="caption"><i>Fig. 2: Sandbox/Compiler</i></span>
	</center>
	
	</p>

	<p>
	The code in the Sandbox is processed by Lilypond and a PDF is
	generated:
	</p>
	<p> 
	<center>
	<img src="fragment-pdf.png" border="2"></br>
	<span class="caption"><i>Fig. 3: PDF score</i></span>
	</center>
	</p>
    </p>
    <p>
    <b>A larger score: Mozart Rondo</b>
    </p>
    <p>
    We'll compile a larger score and generate a midi file as well.
    </p>
    <p>
    In the File Browser, open the 'Rondo.ly' file in the 'Examples ' folder.
    As before, click 'Compile'.
    </p>
    The PDF is generated:
    <p> 
	<center>
	<img src="OMET-PDFViewer.png" border="2"></br>
	<span class="caption"><i>Fig. 4: PDF score - Mozart Rondo</i></span>
	</center>
	</p> 
	In the File Browser, open the newly-generated 'Rondo.midi' file:
	<p> 
	<center>
	<img src="OMET-FolderListing.png" border="2"></br>
	<span class="caption"><i>Fig. 5: Folder listing</i></span>
	</center>
	</p> 
	</p>
	<p>
	An in-browser midi player will open and play the file.
	</p>
	<p> 
	<center>
	<img src="OMET-MIDIViewer.png" border="2"></br>
	<span class="caption"><i>Fig. 6: Midi Player</i></span>
	</center>
	</p> 
	<i>N.B. The midi player needs to download the sound fonts, which may take
	a few moments on slower internet connections.</i>
	
    

    </div>

    <script>
      // Global function to send a message to OS.js Application
      function sendMessage() {
        top.postMessage({
          name: 'osjs/iframe:message',
          params: [{
            pid: parseInt(window.location.search.match(/pid=([^&]*)/)[1], 10),
            wid: parseInt(window.location.search.match(/wid=([^&]*)/)[1], 10),
            args: Array.prototype.slice.call(arguments)
          }]
        }, '*');
      }

      // Listen from messages from OS.js Application
      window.addEventListener('message', function(ev) {

       
      	document.getElementById("MyAppDiv").innerHTML+= ev.data + "</br>";
      	document.getElementById("MyAppDiv").scrollTop = document.getElementById("MyAppDiv").scrollHeight;
 
      });

      // Send an example message
 //     sendMessage('Ping');
    </script>
  </body>
</html>